webpackJsonp([5],{"9dGa":function(e,r){},EYUO:function(e,r){},iwpF:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t("Xxa5"),a=t.n(s),i=t("exGp"),n=t.n(i),o=function(e,r,t){if(!r)return t(new Error("输入不可以为空"));return/^1[34578]\d{9}$/.test(r)?t():t(new Error("请输入正确格式的手机号"))},l=function(e,r,t){return r?r.length<6?t(new Error("密码长度不能小于6位")):t():t(new Error("密码不能为空"))},c=function(e,r,t){if(!r)return t(new Error("邮箱地址不能为空"));/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9]+\.[a-z]+$/.test(r)?t():t(new Error("请输入正确的邮箱地址"))},u=function(e,r,t){if(!r)return t(new Error("用户名不能为空"));/^[^ ]{0,16}$/.test(r)?t():t(new Error("用户名不能带有空格"))},m={name:"register",data:function(){var e,r=this;return{registerForm:{account:"",pwd:"",checkPwd:"",email:"",name:"",phone:""},registerRules:{account:[{required:!0,validator:(e=n()(a.a.mark(function e(t,s,i){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return",i(new Error("账号不可以为空")));case 2:if(/^[a-zA-Z]{1}\w{5,15}$/.test(s)){e.next=5;break}return e.abrupt("return",i(new Error("请输入正确格式的账号")));case 5:return e.prev=5,e.next=8,r.$api.user.validateAccount({account:s});case 8:if(2e3!==(n=e.sent).status){e.next=13;break}return e.abrupt("return",i());case 13:return e.abrupt("return",i(new Error(n.message)));case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(5),console.log(e.t0),e.abrupt("return",i(new Error("服务器忙碌")));case 20:case"end":return e.stop()}},e,r,[[5,16]])})),function(r,t,s){return e.apply(this,arguments)}),trigger:"blur"}],pwd:[{required:!0,validator:l,trigger:"blur"}],checkPwd:[{required:!0,validator:function(e,t,s){return r.registerForm.pwd==r.registerForm.checkPwd?s():s(new Error("两次输入的密码不一致"))},trigger:"blur"}],email:[{required:!0,validator:c,trigger:"blur"}],name:[{required:!0,validator:u,trigger:"blur"}],phone:[{validator:o,trigger:"blur"}]},registerActive:0,registerActiveStep:["下 一 步","注  册","进  入"],loading:!1}},methods:{submitForm:function(e){var r,t=this;2===this.registerActive?(sessionStorage.setItem("account",this.registerForm.account),this.$router.push("/user/login")):this.$refs[e].validate((r=n()(a.a.mark(function e(r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=11;break}if(t.loading=!0,1!=t.registerActive){e.next=10;break}return e.next=6,t.$api.user.register(t.registerForm);case 6:2e3==e.sent.status?t.registerActive++:t.$message.error("服务器繁忙"),e.next=11;break;case 10:t.registerActive++;case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),t.$message.error("服务器繁忙");case 17:t.loading=!1;case 18:case"end":return e.stop()}},e,t,[[0,13]])})),function(e){return r.apply(this,arguments)}))}}},p={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-col",{staticClass:"login",attrs:{span:12,pull:3,xm:20}},[t("div",{attrs:{id:"register"}},[t("el-header",[t("el-row",[t("el-steps",{staticClass:"tal",attrs:{active:e.registerActive,"finish-status":"success"}},[t("el-step",{attrs:{title:"注册"}}),e._v(" "),t("el-step",{attrs:{title:"昵称"}}),e._v(" "),t("el-step",{attrs:{title:"完成"}})],1)],1)],1),e._v(" "),t("el-main",[t("el-row",[t("h2",[e._v("欢迎加入")])]),e._v(" "),t("div",{staticClass:"absolute"},[t("transition",{attrs:{name:"slide-fade","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"}},[0==e.registerActive?t("el-form",{key:"0",ref:"registerForm",attrs:{model:e.registerForm,"status-icon":"",rules:e.registerRules,"label-width":"85px"}},[t("el-form-item",{attrs:{label:"账号:",prop:"account"}},[t("el-input",{attrs:{placeholder:"输入 账号",maxlength:"16"},model:{value:e.registerForm.account,callback:function(r){e.$set(e.registerForm,"account","string"==typeof r?r.trim():r)},expression:"registerForm.account"}})],1),e._v(" "),t("span",{staticClass:"small pale fr"},[e._v("长度6至16位，字母开头，由数字、字母、下划线组成")]),e._v(" "),t("el-form-item",{attrs:{label:"密码:",prop:"pwd"}},[t("el-input",{attrs:{type:"password",placeholder:"输入 密码"},model:{value:e.registerForm.pwd,callback:function(r){e.$set(e.registerForm,"pwd",r)},expression:"registerForm.pwd"}})],1),e._v(" "),t("span",{staticClass:"request fr"},[e._v("长度6至16位")]),e._v(" "),t("el-form-item",{attrs:{label:"确认密码:",prop:"checkPwd"}},[t("el-input",{attrs:{type:"password",placeholder:"再次输入 密码"},model:{value:e.registerForm.checkPwd,callback:function(r){e.$set(e.registerForm,"checkPwd",r)},expression:"registerForm.checkPwd"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"邮箱地址:",prop:"email"}},[t("el-input",{attrs:{placeholder:"输入 邮箱地址"},model:{value:e.registerForm.email,callback:function(r){e.$set(e.registerForm,"email","string"==typeof r?r.trim():r)},expression:"registerForm.email"}})],1),e._v(" "),t("div",{staticClass:"dividing_01"}),e._v(" "),t("div",{staticClass:"small fl"},[e._v("\n\t\t\t\t\t\t\t我已了解并同意\n\t\t\t\t\t\t\t"),t("a",{attrs:{href:"../#/help/announce",target:"_blank"}},[e._v("《"),t("span",{staticClass:"blue"},[e._v("圣杯网 用户协议与服务条款")]),e._v("》")])]),e._v(" "),t("div",{staticClass:"small fr"},[t("router-link",{attrs:{to:"/user/login"}},[e._v("返回登录<-")])],1)],1):e._e(),e._v(" "),1==e.registerActive?t("el-form",{key:"1",ref:"registerForm",attrs:{model:e.registerForm,"status-icon":"",rules:e.registerRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"用户名:",prop:"name"}},[t("el-input",{attrs:{placeholder:"输入 用户名",maxlength:"16"},model:{value:e.registerForm.name,callback:function(r){e.$set(e.registerForm,"name","string"==typeof r?r.trim():r)},expression:"registerForm.name"}})],1),e._v(" "),t("span",{staticClass:"request fr"},[e._v("长度最多16位，不允许带有空格，注册后可免费修改一次")]),e._v(" "),t("el-form-item",{attrs:{label:"手机号:",prop:"phone"}},[t("el-input",{attrs:{placeholder:"输入 手机号",maxlength:"11"},model:{value:e.registerForm.phone,callback:function(r){e.$set(e.registerForm,"phone","string"==typeof r?r.trim():r)},expression:"registerForm.phone"}})],1),e._v(" "),t("div",{staticClass:"small fr"},[t("router-link",{attrs:{to:"/user/login"}},[e._v("返回登录<-")])],1)],1):e._e(),e._v(" "),2==e.registerActive?t("el-row",{key:"2"},[t("div",{staticClass:"large green",attrs:{id:"success"}},[t("i",{staticClass:"el-icon-success"}),e._v(" 注册成功\n\t\t\t\t\t\t")]),e._v(" "),t("span",{staticClass:"meduim fr"},[t("a",{attrs:{href:"#"}},[e._v("完善个人信息>>")])])]):e._e()],1)],1)],1),e._v(" "),t("el-footer",[t("el-button",{staticClass:"bold meduim",attrs:{type:"primary",loading:e.loading},on:{click:function(r){return e.submitForm("registerForm")}}},[e._v(e._s(e.registerActiveStep[e.registerActive]))])],1)],1)])},staticRenderFns:[]};var g=t("VU/8")(m,p,!1,function(e){t("9dGa"),t("EYUO")},"data-v-16321080",null);r.default=g.exports}});
//# sourceMappingURL=5.f3860940000a63b342e5.js.map